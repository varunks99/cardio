import React, { useEffect, useState } from "react";
import Grid from "@mui/material/Grid";
import Container from "@mui/material/Container";
import {
    Chart as ChartJS,
    CategoryScale,
    LinearScale,
    PointElement,
    LineElement,
    Title,
    Tooltip,
    Filler,
    Legend,
} from "chart.js";
import { Line } from "react-chartjs-2";
import Box from '@mui/material/Box';
import Card from '@mui/material/Card';
import Stack from '@mui/material/Stack';
import CardContent from '@mui/material/CardContent';
import Button from '@mui/material/Button';
import Typography from '@mui/material/Typography';


ChartJS.register(
    CategoryScale,
    LinearScale,
    PointElement,
    LineElement,
    Title,
    Tooltip,
    Filler,
    Legend
);

export function Earnings() {
    const principals = [0, 85, 121, 164, 214, 257, 300, 335, 383, 426, 463, 493, 536, 575, 614, 657, 691, 731, 777, 825, 867, 905, 944, 991, 1041, 1086, 1126, 1165, 1203, 1239, 1278, 1310, 1348, 1396, 1433, 1483, 1517, 1549, 1594, 1638, 1674, 1720, 1762, 1804, 1840, 1886, 1919, 1965, 2013, 2059, 2090, 2140, 2181, 2213, 2243, 2278, 2315, 2365, 2395, 2443, 2480, 2510, 2542, 2592, 2640, 2676, 2709, 2749, 2789, 2822, 2857, 2891, 2933, 2967, 3008, 3048, 3079, 3122, 3159, 3202, 3241, 3278, 3317, 3347, 3386, 3430, 3463, 3509, 3555, 3590, 3635, 3670, 3702, 3734, 3776, 3823, 3853, 3897, 3930, 3969, 4007, 4054, 4087, 4132, 4171, 4211, 4243, 4285, 4323, 4360, 4410, 4459, 4507, 4557, 4590, 4638, 4680, 4718, 4761, 4792, 4833, 4875, 4912, 4958, 4998, 5034, 5078, 5122, 5160, 5200, 5233, 5264, 5313, 5349, 5397, 5429, 5459, 5492, 5524, 5565, 5612, 5656, 5687, 5736, 5781, 5822, 5853, 5893, 5938, 5986, 6030, 6066, 6115, 6155]
    const w_interest = [0, 45.0, 39.15, 45.7405, 53.201835, 46.72412845, 46.2706889915, 38.238948229405, 50.67672637605835, 46.547370846324085, 40.25831595924269, 32.818082117146986, 45.29726574820029, 42.170808602374024, 41.951956602166184, 45.93663696215163, 37.21556458735061, 42.60508952111454, 48.98235626647802, 51.42876493865346, 45.60001354570574, 41.1920009481994, 41.88344006637396, 49.93184080464618, 53.495228856325234, 48.74466601994277, 43.41212662139599, 42.03884886349772, 40.94271942044484, 38.86599035943114, 41.72061932516018, 34.92044335276121, 40.44443103469329, 50.83111017242853, 40.55817771207, 52.8390724398449, 37.69873507078914, 34.63891145495524, 47.424723801846866, 47.31973066612928, 39.31238114662905, 48.75186668026404, 45.41263066761848, 45.178884146733296, 39.16252189027133, 48.741376532318995, 36.41189635726233, 48.54883274500836, 51.39841829215059, 49.597889280450545, 34.47185224963154, 52.413029657474205, 44.6689120760232, 35.126823845321624, 32.458877669172516, 37.27212143684208, 39.60904850057894, 52.77263339504053, 33.69408433765284, 50.3585859036357, 40.5251010132545, 32.83675707092782, 34.29857299496495, 52.400900109647544, 51.66806300767533, 39.61676441053727, 35.77317350873761, 42.50412214561163, 42.975288550192815, 36.0082701985135, 37.520578913895946, 36.62644052397272, 44.56385083667809, 37.11946955856747, 43.598362869099724, 43.05188540083698, 34.01363197805859, 45.3809542384641, 40.17666679669249, 45.81236667576847, 42.206865667303795, 39.954480596711264, 41.79681364176979, 32.92577695492388, 41.30480438684467, 46.89133630707913, 36.28239354149554, 48.53976754790469, 49.39778372835333, 38.457844860984736, 47.692049140268935, 38.338443439818825, 34.683691040787316, 34.42785837285511, 44.409950086099855, 50.10869650602699, 33.50760875542189, 46.34553261287953, 36.24418728290157, 41.53709310980311, 40.907596517686216, 49.86353175623803, 36.490447222936666, 47.554331305605565, 42.32880319139239, 42.96301622339747, 35.007411135637824, 44.45051877949465, 41.111536314564624, 39.877807542019525, 52.79144652794137, 52.6954012569559, 51.688678087986915, 53.618207466159085, 36.75327452263114, 50.57272921658418, 45.54009104516089, 41.187806373161266, 45.88314644612129, 34.21182025122849, 43.394827417585994, 45.03763791923102, 40.15263465434617, 48.81068442580423, 43.4167479098063, 39.03917235368644, 46.73274206475805, 47.27129194453306, 41.30899043611731, 42.89162933052821, 36.002414053136974, 33.520168983719586, 51.34641182886037, 39.59424882802023, 50.77159741796142, 35.5540118192573, 32.48878082734801, 35.274214657914364, 34.469195026054, 43.41284365182378, 50.03889905562767, 47.502722933893935, 34.325190605372576, 51.40276334237608, 48.59819343396633, 44.40187354037764, 34.108131147826434, 42.38756918034785, 47.96712984262435, 51.35769908898371, 47.59503893622886, 39.33165272553602, 51.75321569078752, 43.622725098355126, 51.05359075688486]
    const options = {
        responsive: true,
        plugins: {
            legend: {
                position: "top",
            },
            title: {
                display: true,
                text: "Savings"
            },
        },
        scales: {
            x: {
                title: {
                    display: true,
                    text:
                        "Month"
                },
                grid: {
                    display: false
                }
            },
            y: {
                title: {
                    display: true,
                    text: "CAD",
                },
                grid: {
                    display: false
                }
            },
        },
    };

    const data = {
        labels: Array(12).fill(0),
        datasets: [
            {
                label: "Principal",
                data: principals.slice(0, 12),
                borderColor: 'rgb(255, 99, 132)',
                backgroundColor: 'rgba(255, 99, 132, 0.5)',
            },
            {
                label: 'Dataset 2',
                data: w_interest.slice(0, 12),
                borderColor: 'rgb(53, 162, 235)',
                backgroundColor: 'rgba(53, 162, 235, 0.5)',
            },
        ],
    };

    return (
        <>
            <Container sx={{ mt: 3 }}>
                <Grid container spacing={2} sx={{ height: "90vh" }} justifyContent="center">
                    <Grid item xs={12} md={6}>
                        <Card sx={{ minWidth: 275, boxShadow: 4, borderRadius: 3 }}>
                            <CardContent>
                                <Typography variant="h5" textAlign="center" color="text.secondary" >
                                    You have saved
                                </Typography>
                                <Typography variant="h3" textAlign="center" fontWeight="bold" color="text.secondary" >
                                    $110.54
                                </Typography>
                            </CardContent>
                        </Card>
                    </Grid>
                    <Grid item xs={12} md={8}>
                        <Line options={options} data={data} />
                    </Grid>
                    <Grid item xs={12} md={8}>
                        <Stack direction="row" justifyContent="center" spacing={5}>
                            <Button variant="contained">Cash Out</Button>
                            <Button variant="contained">Pay Balance</Button>
                        </Stack>
                    </Grid>
                </Grid>

            </Container>
        </>
    )
}